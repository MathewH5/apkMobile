<ion-header>
  <ion-toolbar color="light">
    <ion-title>Meu Perfil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <div class="center">
    <ion-avatar style="width: 88px; height: 88px;">
      <img
        [src]="(profile$ | async)?.photoURL || 'assets/avatar-placeholder.png'"
        referrerpolicy="no-referrer"
        (error)="removerFoto()"
        alt="avatar" />
    </ion-avatar>

    <ion-button size="small" color="danger" (click)="trocarFotoPorLink()">
      Trocar por link
    </ion-button>
    <ion-button size="small" fill="outline" color="medium" (click)="removerFoto()">
      Remover
    </ion-button>
  </div>
  <ion-card>
    <ion-card-header>
      <ion-card-title>ðŸ“Š EstatÃ­sticas</ion-card-title>
    </ion-card-header>

    <ion-list *ngIf="(profile$ | async) as p">
      <ion-item>
        <ion-label>Desafios ConcluÃ­dos</ion-label>
        <ion-badge slot="end" color="success">{{ p.stats.completedCount }}</ion-badge>
      </ion-item>

      <ion-item>
        <ion-label>Streak ðŸ”¥</ion-label>
        <ion-badge slot="end">{{ p.stats.streak }}</ion-badge>
      </ion-item>

  <ion-item>
    <ion-label>Semana (Ãºltimos 7 dias)</ion-label>
    <ion-badge slot="end" color="medium">
      {{ weekSum(p.stats.week) }}
    </ion-badge>
  </ion-item>

  <ion-item lines="none">
    <ion-label>
      <div>Meta diÃ¡ria</div>
      <div class="text-xs opacity-70">
        Hoje: {{ todayCount(p) }} / {{ p.stats.dailyGoal }}
      </div>
      <ion-progress-bar [value]="dailyProgress(p)"></ion-progress-bar>
    </ion-label>
  </ion-item>

      <ion-item>
        <ion-label>Pontos</ion-label>
        <ion-badge slot="end" color="primary">{{ p.points }}</ion-badge>
      </ion-item>
    </ion-list>
  </ion-card>

  <ion-button expand="block" color="medium" (click)="logout()">Sair</ion-button>
</ion-content>
